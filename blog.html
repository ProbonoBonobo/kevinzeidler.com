<!DOCTYPE html>
<!--[if lte IE 8 ]><html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html xmlns:graffiti="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"><!--<![endif]-->
<head>
	<meta charset="utf-8">

	<title>Dev Blog. | KevinZeidler.com</title>

	<!-- Behavioral Meta Data -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

	<!-- Core Meta Data -->
	<meta name="author" content="Kevin Zeidler">
	<meta name="description" content="Dev Blog. | KevinZeidler.com.">

	<!-- Open Graph Meta Data -->
	<meta property="og:description" content="Dev Blog. | KevinZeidler.com">
	<meta property="og:image" content="./images/me.jpg">
	<meta property="og:site_name" content="Kevin Zeidler">
	<meta property="og:title" content="Dev Blog. | KevinZeidler.com">
	<meta property="og:type" content="Portfolio">

	<!-- Twitter Card Meta Data -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="@KevinZeidler">
	<meta name="twitter:creator" content="@KevinZeidler">
	<meta name="twitter:title" content="Dev Blog. | KevinZeidler.com">
	<meta name="twitter:description" content="A blog about Web Development.">
	<meta name="twitter:image" content="./images/me.jpg">

	<!-- Favicon -->
	<link rel="shortcut icon" href="favicon.png" type="image/png">

	<!-- Apple Touch Icons -->
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="apple-touch-icon-144x144-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-114x114-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-72x72-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="57x57" href="apple-touch-icon-57x57-precomposed.png">

	<!--[if lt IE 9]>
		<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Fonts -->
	<link href='http://fonts.googleapis.com/css?family=Cardo:400,400italic|Montserrat:700,400' rel='stylesheet' type='text/css'>

	<!-- Styles -->
	<link rel="stylesheet" type="text/css" href="./maven/loader.css"/>
	<link rel="stylesheet" type="text/css" href="./maven/framework.css"/>
	<link rel="stylesheet" type="text/css" href="./maven/style.css"/>
	<link rel="stylesheet" type="text/css" href="./progressbar.css"/>
	<link rel="stylesheet" type="text/css" href="./maven/bootstrap.css"/>

	<!-- Colors -->
<link rel="stylesheet" type="text/css" href="./maven/blue.css" title="blue" media="screen">
	<!--<link rel="alternate stylesheet" type="text/css" href="css/colors/red.css" title="red" media="screen">-->
	<!--<link rel="alternate stylesheet" type="text/css" href="css/colors/green.css" title="green" media="screen">-->
	<!--<link rel="alternate stylesheet" type="text/css" href="css/colors/yellow.css" title="yellow" media="screen">-->
<!-- 	<link rel="alternate stylesheet" type="text/css" href="maven/colors/pink.css" title="pink" media="screen"> -->
<!-- 	<link rel="alternate stylesheet" type="text/css" href="css/colors/orange.css" title="orange" media="screen">
	<link rel="alternate stylesheet" type="text/css" href="css/colors/gray.css" title="gray" media="screen">
	<link rel="alternate stylesheet" type="text/css" href="css/colors/purple.css" title="purple" media="screen">
	<link rel="alternate stylesheet" type="text/css" href="css/colors/steel.css" title="steel" media="screen"> -->

	<!--[if lt IE 9]>
		<link rel="stylesheet" type="text/css" href="./css/ie.css" />
	<![endif]-->

	<!-- Javascript -->
	<script src="./js/jquery.js"></script>
	<script src="./js/modernizr.js"></script>
	<script src="./js/progressbar.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
	<script src="./js/knockout.js"></script>
	<script src="./js/revok.js" type="text/javascript" charset="utf-8"></script>
	<style>

		#myProgress {
			width: 100%;
			height: 30px;
			background-color: #ddd;
		}

		#myBar {
			background-color: #4CAF50;
			width: 2%;
			height: 30px;

		}
		.test-icon img {
			align: right;
			margin-left: 50%;
			min-width: 7px;
			max-width: 12px;
		}

	</style>





</head>

<body>
	<!-- Loader -->
	<div class="loader center dark">
		<div class="loader-content">
			<img src="images/kevin-zeidler-logo-clear.png" width="138" height="25" alt="logo"><br>
			<span class="progress-container"><span class="progress"></span></span>
		</div>
		<script type="text/javascript">
			$(window).load(function(){
				$('.loader').delay(1000).fadeOut('slow');
			});
		</script>
	</div><!-- END LOADER -->

	<!-- Header -->
	<header>
		<!-- Logo -->
		<div class="header-inner">
			<a class="logo" href="#"><img src="images/kevin-zeidler-logo-clear.png" alt="logo" width="138" height="25"></a>
		</div>

		<!-- Menu Button -->
		<div class="menu-button">
			<span class="before"></span>
			<span class="main"></span>
			<span class="after"></span>
		</div>
	</header><!-- END Header -->

	<!-- Navigation -->
	<nav class="push-nav push-right" style="background-image: url(images/navigation.jpg);">
		<!-- Logo -->
		<div class="logo-nav"><a href="#"><img src="/images/kevin-zeidler-logo-clear.png" alt="logo" width="138" height="25"></a></div>
		<div class="footer-nav">
			<!-- Social -->
			<ul class="social">
				<li><a href="#"><i class="social-icon-behance"></i></a></li>
				<li><a href="#"><i class="social-icon-twitter"></i></a></li>
				<li><a href="#"><i class="social-icon-dribbble"></i></a></li>
				<li><a href="#"><i class="social-icon-instagram"></i></a></li>
			</ul>

			<!-- Copyright -->
			<h6>Copyright Â© 2016 Kevin Zeidler</h6>
		</div>

		<!-- Links -->
		<ul class="navigation">
			<li><a href="index.html#section1">Hello</a></li>
			<li><a href="index.html#section2">About</a></li>
			<li><a href="index.html#section5">Work</a></li>
			<li><a href="index.html#section6">Team</a></li>
			<li><a href="index.html#section9">Contact</a></li>
		</ul>
	</nav><!-- END Navigation -->

	<!-- Main Wrap -->
	<div class="navigation-overlay"></div>
	<div id="wrap">

		<!-- Hero -->
		<section class="poster dark center padded-xl nav-trigger" style="background-image: url(images/lightningcat.jpg);" data-0="background-position: 0px 0px;" data-top-bottom="background-position: 0px 100px">

			<!-- Hero Content -->
			<div class="container">
				<div class="col-xs-12 col-sm-10 col-sm-offset-1" data-0="opacity: 1;" data-top-bottom="opacity: 0;">
					<h2>The blog.</h2>
					<span class="separator"></span>
					<h5>latest &amp; greatest news.</h5>
				</div>
			</div>
		</section><!-- END Hero -->

		<!-- Begin Blog Block -->
		<section class="container">
			<div class="row">

				<!-- Begin Posts -->
				<div class="col-sm-8" id="post-macro">

					<!-- Standard Post -->
					<!--<ul class="categories-widget">-->
					<!--</ul>-->




					<!--<div class="post image" id="1">-->
						<!--<div class="date-container"></div>-->
						<!--<div class="post-title"></div>-->
						<!--<div class="post-meta"></div>-->
						<!--<div class="post-media" id="image"></div>-->

						<!--<div class="post-container"></div>-->
					<!--</div>&lt;!&ndash; END &ndash;&gt;-->


					<!--<div class="post image" id="2">-->
						<!--<div class="date-container"></div>-->
						<!--<div class="post-title"></div>-->
						<!--<div class="post-meta"></div>-->
						<!--<div class="post-media" id="image"></div>-->

						<!--<div class="post-container"></div>-->
					<!--</div>&lt;!&ndash; END &ndash;&gt;-->


					<!--<div class="post image" id="3">-->
						<!--<div class="date-container"></div>-->
						<!--<div class="post-title"></div>-->
						<!--<div class="post-meta"></div>-->
						<!--<div class="post-media" id="image"></div>-->

						<!--<div class="post-container"></div>-->
					<!--</div>&lt;!&ndash; END &ndash;&gt;-->

					<!--<div class="post image" id="4">-->
						<!--<div class="date-container"></div>-->
						<!--<div class="post-title"></div>-->
						<!--<div class="post-meta"></div>-->
						<!--<div class="post-media" id="image"></div>-->

						<!--<div class="post-container"></div>-->
					<!--</div>&lt;!&ndash; END &ndash;&gt;-->

					<!--<div class="navlinks">-->
						<!--<div class="prev"></div>-->
						<!--<div class="next"></div>-->
					<!--</div>-->
				</div>













				<!-- Begin Sidebar -->
				<div class="col-sm-4">
					<div class="sidebar">

						<!-- search widget -->
						<div class="widget clearfix">
							<form action="#" >
								<input name="s" id="s" type="text" class="search" placeholder="Search.." value="" />
								<input type="submit" value="Go" class="search-submit" />
							</form>
						</div><!-- END -->

						<!-- text widget -->
						<!--<div class="widget">-->
							<!--<h5>TEXT WIDGET</h5>-->
							<!--<div class="textwidget"><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna.</p></div>-->
						<!--</div>&lt;!&ndash; END &ndash;&gt;-->

						<div class="widget">
							<h5>Blog Health</h5>
							<span class="value" id="blogHealth" style="font: normal 40px 'Roboto'; " >0%</span>
							<div id="myProgress">
								<div id="myBar" data-percent-correct="100"></div>

							</div>
							<p style="font-size: 12px; color: gray;">A series of diagnostic tests to make sure everything's running smoothly.</p>
						</div>

						<div class="widget">
							<h5>Unit Tests</h5>
							<ul style="font-size: 12px;">
								<div class="row">
									<div class="col-xs-2 test-icon" id="ut1">
										<!--<img class="test-icon" src="images/success.png" width="30%" height="30%">-->
									</div>
									<div class="col-xs-10 test-icon">
										<li class="cat-item test-description"><a href="#">Did we get a valid JSON response?</a></li>
									</div>
								</div>
								<div class="row">
									<div class="col-xs-2 test-icon" id="ut2">
										<!--<img class="test-icon" src="images/success.png" width="30%" height="30%">-->
									</div>
									<div class="col-xs-10 test-icon">
										<li class="cat-item test-description"><a href="#">Are there posts to display for the present view?</a></li>
									</div>
								</div>
								<div class="row">
									<div class="col-xs-2 test-icon" id="ut3">
										<!--<img class="test-icon" src="images/success.png" width="30%" height="30%">-->
									</div>
									<div class="col-xs-10">
										<li class="cat-item test-description"><a href="#">Have we accumulated all the content tags in an array?</a></li>
									</div>
								</div>
								</ul>
							</div>
								<!--<li class="cat-item"><a href="#">Are the posts displayed in reverse chronological order?</a> (6)</li>-->
								<!--<li class="cat-item"><a href="#">Have we successfully generated an array of tags?</a> (12)</li>-->



						<!-- END -->

						<!-- categories widget -->
						<div class="widget">
							<h5>EXPOSED PIPES</h5>
							<ul class="categories-widget">
								<div data-bind="foreach: filters" style="font-size: 10px;">
									<input type="button" data-bind="click: $parent.setActiveFilter, value: title"/>
								</div>

								<br/>

								<table>
									<thead>
									<tr data-bind="foreach: headers">
										<th data-bind="click: $parent.sort, text: title"></th>
									</tr>
									</thead>
									<tbody data-bind="foreach: filteredPosts" style="font-size: 10px;">
									<tr>
										<td data-bind="text: ID"></td>
										<td data-bind="text: monthYear"></td>
										<td data-bind="text: flytitle"></td>
										<td data-bind="text: headline"></td>
										<td data-bind="text: lede"></td>
										<td data-bind="text: img"></td>
										<td data-bind="text: tags"></td>
									</tr>
									</tbody>
								</table>
							</ul>
							<!--<button data-bind="click: updateTag " id="refreshbutton">Refresh Tag</button>-->

						</div><!-- END -->

						<!--&lt;!&ndash; tagcloud widget &ndash;&gt;-->
						<!--<div class="widget" id="tagCloud">-->
							<!--<h5>TAGS</h5>-->
							<!--<div class="tagcloud">-->
							<!--</div>-->
						<!--</div>&lt;!&ndash; END &ndash;&gt;-->

						<!-- archives widget -->
						<div class="widget widget-archive">
							<h5>Archives</h5>
							<ul id="date-archives">
								<!--<li><a href="#">July 2013</a></li>-->
								<!--<li><a href="#">June 2013</a></li>-->
							</ul>
						</div><!-- END -->

						<!-- recent comments widget -->
						<!--<div class="widget widget-recent-comments">-->
							<!--<h5>Recent Comments</h5>-->
							<!--<ul id="recentcomments">-->
								<!--<li class="recentcomments">Admin on <a href="#">Standard post with goodies.</a></li>-->
								<!--<li class="recentcomments">Aether-Themes on <a href="#">Fluid video. Yeah we got that.</a></li>-->
								<!--<li class="recentcomments">Admin on <a href="#">Gallery post with slider.</a></li>-->
							<!--</ul>-->
						<!--</div>&lt;!&ndash; END &ndash;&gt;-->

						<!-- recent posts widget -->
						<div class="widget widget-recent-entries">
							<h5>Recent Posts</h5>


						</div><!-- END -->

					</div>
				</div><!-- END -->

			</div>
		</section>
		<!-- End Blog Block -->
		<!-- End Blog Block -->

		<!-- Begin Footer -->
		<footer class="center black">
			<div class="container">
				<!-- Social -->
				<div class="row">
					<ul class="social col-xs-12">
						<li><a href="#"><i class="social-icon-behance"></i></a></li>
						<li><a href="#"><i class="social-icon-twitter"></i></a></li>
						<li><a href="#"><i class="social-icon-dribbble"></i></a></li>
						<li><a href="#"><i class="social-icon-instagram"></i></a></li>
					</ul>
				</div>

				<!-- Copyright -->
				<div class="row">
					<div class="col-xs-12"><h6>Copyright Â© 2016 Kevin Zeidler</h6></div>
				</div>
			</div><!-- END Container -->
		</footer><!-- END Footer -->

        <script>

//         <=====================Important=====================>
//          hello, me.
//
//          please make sure the environment variable is correct
//          before proceeding, especially after fetch/pull
//          operations. (Key: 0 = dev, 1 = production server)

            var my_env,
					fp,
					postsToFetch;

            my_env = 0;

            switch (my_env) {
                	case 0:
                    fp = "blogfeed-dev.json";
                    break;
                case 1:
                    fp = "blogfeedv2.json";
                    break;
            }



			function getPostsForCurrentView(maxNum, view) {
				// Return an array containing the IDs of the posts we need to load.
				// 2/18: don't automatically load every post. instead, require callee to specify a view flag of 'all'
				// todo: infer which posts to load based on the user's current URL
				var ids;

				switch (view) {
					case "all":
							// note the
						ids = Array.apply( null, Array( maxNum + 1 ) ).map( function ( _, i ) {return i;} );
						return ids;
					default:
						console.log(
								"Warning: invalid view flag passed to getPostsForCurrentView. You must specify a view mode."
						);
					}
				return ids;
			}





			function createPostContainerWithID(pid) {
				var node = String("<div class=\"post image\" id=\"" + pid + "\">" +
								  "<div class=\"date-container\"></div>" +
								  "<div class=\"post-category\"></div>" +
								  "<div class=\"post-title\"></div>" +
								  "<div class=\"post-meta\"></div>" +
								  "<div class=\"post-media\"></div>" +
								  "<div class=\"post-container\"></div>" +
								  "</div><!-- END -->");
				return node;
			}
			function insertTagEngineDemo(tags) {

				console.log( "DOM fully loaded and parsed" );

				arr =
						[];
				console.log( "Attempting to append tags to #tags-demo. Current value: " + tags );
				tags.forEach( function ( k, v ) {
								  arr.push( k );
					              arr.push( v );
								  console.log( arr );
							  }
				);
				initiateUnitTest(3, [arr]);
				for ( i = 0; i < arr.length; i += 2) {
					console.log(i);
					$( "<a href='#" +
					   arr[ i+1 ] +
					   "' class='content-tag initial' id='tag" +
					   i +
					   "' data-freq='" +
					   arr[i] +
					   "' >" +
					   arr[ i+1 ] +
					   "</a>" ).click(function(e) {$(this ).addClass("focus" ).siblings().removeClass("focus"); $(this ).removeClass("blurred" ).siblings().addClass("blurred"); } )
							.appendTo( $( '.tagcloud' ) );
				}
				var tags = document.getElementsByClassName("initial");


			}




            function getJSONValueOf( param, index ) {
                return data.responseJSON[ 'posts' ][ index ][ param ];
            }

            function sortProperties(obj)
            {
                // convert object into array
                var sortable=[];
                for(var key in obj)
                    if(obj.hasOwnProperty(key))
                        sortable.push([key, obj[key]]); // each item is an array in format [key, value]

                // sort items by value
                sortable.sort(function(a, b)
                              {
                                  return a[1]-b[1]; // compare numbers
                              });
                return sortable; // array in format [ [ key1, val1 ], [ key2, val2 ], ... ]
            }


            function quoteattr( s, preserveCR ) {
                // For sanitizing strings.
                preserveCR = preserveCR ? '&#13;' : '\n';
                return ('' + s
                ) /* Forces the conversion to string. */
                        .replace( /&/g, '&amp;' ) /* This MUST be the 1st replacement. */
                        .replace( /'/g, '&apos;' ) /* The 4 other predefined entities, required. */
                        .replace( /"/g, '&quot;' )
                        .replace( /</g, '&lt;' )
                        .replace( />/g, '&gt;' )
                        /*
                         You may add other replacements here for HTML only
                         (but it's not necessary).
                         Or for XML, only if the named entities are defined in its DTD.
                         */
                        .replace( /\r\n/g, preserveCR )
                        /* Must be before the next replacement. */
                        .replace( /[\r\n]/g, preserveCR );
            }
			function initiateUnitTest(test, argarr) {
				var success,
					failed;
				success = ($('<img src = "/images/success.png" style="min-width: 15px;">'));
				failed = ($('<img src = "/images/failed.png" style="min-width: 15px;" >'));
				switch (test) {
					case 1:
						if (argarr[0 ].length > 0) {
							ret = success;
						} else {
							ret = failed;
						}
						return ret.appendTo("#ut1");
					case 2: // are there actually posts to display for the present view?
						if (argarr[0 ].length > 0) {
							ret = success;
						}
						else {
							ret = failed;
						}
						return ret.appendTo("#ut2");


					case 3: // is our content tag engine accumulating at least some tags?
						if (argarr[0 ].length > 0) { ret = success; }
						else { ret = failed;}
						return ret.appendTo("#ut3");
				}


			}
            function generateTemplateString(
                    typeOfNode, argarr ) {
                var target = String(),
                    dynode = String();
                target     = typeOfNode.concat( ", " +
                                                argarr.length
                );
                switch ( target ) {
                    case 'date, 2':
                        console.log( "hooray" );
                        dynode = dynode.concat( '<span class=\"date\">',
                                                argarr[ 0 ],
                                                '<br><small>',
                                                argarr[ 1 ],
                                                '</small></span>'
                        );
                        return dynode;
                    case 'content-head, 7':
                        if ( hasNextParagraph( argarr[ 0 ] ) ) {
                            dynode = dynode.concat( '<div class="head"><p><img src="',
                                                    argarr[ 1 ],
                                                    '"></p><p>',
                                                    argarr[ 0 ][ 0 ],
                                                    '</p></div><div class="tail" id="dynode',
                                                    argarr[ 3 ],
                                                    '"><p>Continue reading...</p></div>'
                            );
                        }
                        else {
                            dynode = dynode.concat( '<div class="head"><img src="',
                                                    argarr[ 1 ],
                                                    '"><p>',
                                                    argarr[ 0 ][ 0 ],
                                                    '</p></div>'
                            );

                        }
                        console.log( "Content node created. Now appending ", dynode );
                        return dynode;
                    case 'content-tail, 2':
                        console.log( 'Now appending ', argarr[ 1 ] );
                        dynode = dynode.
							   concat( '<p>',
									   argarr[ 1 ],
									   '</p >'
                        );
                        return dynode;

					case 'recent-posts, 1':
						dynode = dynode.concat('<li><a href="#">',
											   argarr[0],
											   '</a>');




                    default:
                        console.log(
                                "Value to match is " + target
                        );
                        break;
                }
            }

            function hasNextParagraph( head ) {
                if ( head[ 1 ] ) {
                    return true;
                }
                else {
                    return false;
                }
            }

var callback;
callback = function ( data ) {
	initiateUnitTest(1, [data]);

	console.log( "Initiating load sequence" )
};

$.getJSON( fp, callback );




// 2/22: It would appear we need to construct a model of the JSON object in order to filter that object on the client's side.
$.ajax({
	       url: "blogfeed-dev.json",
		   dataType: 'json',
		   success: function (res) {
			localStorage.setItem("dataCache", JSON.stringify(res));
			}
});

var manifest, db;


if(localStorage.getItem("dataCache")) {
	manifest = JSON.parse(localStorage.getItem("dataCache"));
}


	var table, row, tags;
	table = [];
	console.log("Now constructing a model from ", manifest);
	for (i in manifest['posts']) {
		row = [];
		row.push(i,  (manifest['posts'][i]['month'] + " " + manifest['posts'][i]['year']),  manifest['posts'][i]['category'], manifest['posts'][i]['title'],manifest['posts'][i]['lede'], manifest['posts'][i]['image'],manifest['posts'][i]['tags' ].join());
		table.push(row);
	}
	console.log("Model constructed. ", table);


function get(i, field) {
	return manifest['posts'][i][field];
}

var viewModel = function() {
	var self    = this;
	self.posts =
			ko.observableArray( [ {
									ID: table[ 0 ][ 0 ],
									monthYear: table[ 0 ][ 1 ],
									flytitle: table[ 0 ][ 2 ],
									headline: table[ 0 ][ 3 ],
									lede: table[ 0 ][ 4 ],
									img: table[ 0 ][ 5 ],
									tags: table[ 0 ][ 6 ]
								},
									{
										ID: table[ 1 ][ 0 ],
										monthYear: table[ 1 ][ 1 ],
										flytitle: table[ 1 ][ 2 ],
										headline: table[ 1 ][ 3 ],
										lede: table[ 1 ][ 4 ],
										img: table[ 1 ][ 5 ],
										tags: table[ 1 ][ 6 ]
									}]
			);

	self.headers = [
		{title:'ID',sortPropertyName:'ID', asc: true},
		{title:'Publication Date',sortPropertyName:'monthYear', asc: true},
		{title:'H2',sortPropertyName:'flytitle', asc: true},
		{title:'H1', sortPropertyName:'headline',asc: true},
		{title:'Lede', sortPropertyName: 'lede', asc: true},
		{title:'Image', sortPropertyName: 'img', asc: true},
		{title:'Tags', sortPropertyName: 'tags', asc: true}
	];
	self.filters = [
		{title:'Show All', filter: null},
		{title:'Only jQuery', filter: function(item){return item.tags.includes('jQuery');}},
		{title:'Only kittens', filter: function(item){return item.tags.includes('kittens');}}
			];
	self.activeSort = self.headers[0]; //set the default sort
	self.sort = function(header, event){
		//if this header was just clicked a second time
		if(self.activeSort === header) {
			header.asc = !header.asc; //toggle the direction of the sort
		} else {
			self.activeSort = header; //first click, remember it
		}
		var prop = self.activeSort.sortPropertyName;
		var ascSort = function(a,b){ return a[prop] < b[prop] ? -1 : a[prop] > b[prop] ? 1 : a[prop] == b[prop] ? 0 : 0; };
		var descSort = function(a,b){ return a[prop] > b[prop] ? -1 : a[prop] < b[prop] ? 1 : a[prop] == b[prop] ? 0 : 0; };
		var sortFunc = self.activeSort.asc ? ascSort : descSort;
		self.posts.sort(sortFunc);
	};
	self.activeFilter = ko.observable(self.filters[0].filter);
	self.filteredPosts = ko.computed(function(){
		if(self.activeFilter()){
			return ko.utils.arrayFilter(self.posts(), self.activeFilter());
		} else {
			return self.posts();
		}
	});
	self.setActiveFilter = function(model,event){
		self.activeFilter(model.filter);
	};
}
ko.applyBindings(new viewModel());

console.log("db value is ", db);



$.getJSON( fp,
		   function ( data ) {
			   var i,
				   tagCounter,
				   current;
			   tagCounter = new Map();
			   for ( i in data[ 'posts' ] ) {
				   for ( tag in data[
						   'posts' ][ i ][ 'tags' ] ) {
					   current = tagCounter[ tag ];
					   current = data[ 'posts' ][ i ][ 'tags' ][ tag ];
					   if ( tagCounter.has( String( current ) ) ) {
						   v = tagCounter.get( String( current ) );
						   tagCounter.set( String( current ), v + 1 );
					   }
					   else {
						   tagCounter.set( String( current ), 1 );
					   }
				   }
			   }

			   var sortedTags = sortProperties(tagCounter);
			   console.log("The tags are:" +  sortedTags);
			   insertTagEngineDemo(tagCounter);

                       }

            );
			function generateDateArchives(jsonResponse) {
				for (i in jsonResponse['posts']) {
					console.log( "now generating date archives from ", jsonResponse[ 'posts' ][ i ]['month'], jsonResponse[ 'posts' ][ i ]['year']  );
//					$('<li>', jsonResponse, [ "posts" ][ i ]["month"], jsonResponse[ "posts" ][ i ]["year"], '</li>').appendTo("#date-archives");

				}
			}
            $.getJSON( fp , function ( data ) {
						   generateDateArchives(data);
                           var postArray    = [];
                           var

                               dateLinks    = new Set();
                           var
                               contentLinks = new Map();
                           var chronoLinks  = new Set();    //                var tags = {"byDate": dateLinks,
                           //                            "byType": contentLinks, //                            "byIndex": chronoLinks};
                           var MMM,
                               DD,
                               postID,
                               postDate,
                               postID,
                               postTitle,
							   postCategory,
                               postLede,
                               postHasImage,
                               postImage,
                               postHasImageCaption,
                               postImageCaption,
                               postHasLede,
                               postLede,
                               postHasBody,
                               postContainer,
                               postAuthor,
                               postTags,
                               postTemplate,
                               postMonth,
                               postYear,
                               postPermanentURL,
                               postIsExtensible;
                           var len = data['posts' ].length;
						   postsToFetch = getPostsForCurrentView(len, 'all');
						   initiateUnitTest(2, [postsToFetch]);

				           for (i = postsToFetch.length-1; i > 0-1; i--) {

								console.log("Now creating post " + i);
								$(createPostContainerWithID(i)).appendTo("#post-macro");
							}
                           for ( var i in postsToFetch ) {
							   // Here we create the complete HTML representation of the post from the JSON document and append it to the DOM.


                               console.log( "Creating a new DOM node." );

                               console.log( i, data[ 'posts' ][ i ] );
                               MMM              = data[ 'posts' ][ i ][ 'month' ].slice( 0, 3 );
                               DD  = data[ 'posts' ][ i ][ 'day' ];
                               postMonth = data[ 'posts' ][ i ][ 'month' ];
                               postYear  = data[ 'posts' ][ i ][ 'year ' ];
                               postID    = data[ 'posts' ][ i ][ 'id' ];
							   postCategory = data[ 'posts' ][ i ][ 'category' ];
                               postTitle = data[ 'posts' ][ i ][ 'title' ];
                               postLede  = data[ 'posts' ][ i ][ 'lede' ];
                               postImage = data[ 'posts' ][ i ][ 'image' ];
                               postContainer = data[ 'posts' ][ i ][ 'content' ];
                               postTags      = data[ 'posts' ][ i ][ 'tags' ];
                               postTemplate  = data[ 'posts' ][ i ][ 'displayoption' ];
                               postPermanentURL = "/todo.html";
                               postImageCaption = "Here's a placeholder caption.";
                               postIsExtensible = hasNextParagraph( postContainer );

							   // Insert the date
                               $( generateTemplateString( 'date', [ DD, MMM ] ) ).insertAfter( '.post#' + i + ' .date-container');

							   // Insert the category
							   $( '<h5>' + postCategory + '</h5>' ).insertAfter( '.post#' + i + ' .post-category');

							   // Insert the title
                               $( '<h4>' + postTitle + '</h4>' ).insertAfter( '.post#' + i + ' .post-title');

                               $( '<h6 id="lede">' + postLede + '</h6>' ).insertAfter( '.post#' + i + ' .post-meta');

                               $( generateTemplateString( 'content-head',
                                                          [
                                                              postContainer,
                                                              postImage,
                                                              postImageCaption,
                                                              postID,
                                                              postPermanentURL,
                                                              postTemplate,
                                                              postIsExtensible
                                                          ]
                                  )
                               ).insertAfter( '.post#' + i + ' .post-container' );


                           }

                       }
            );

            // Generate links for our navigation pages


            //
            //        postArray.map(function (obj) {
            //            dateLinks.add(obj['month'] + " " + obj['year']);
            //        });
            //
            //        console.log(dateLinks);
            //
            //        postArray.map(function (obj) {


            //            obj['tags'].map(function (topic) {
            //                contentTags.add(topic);
            //            });
            //        });
            //
            //        for (i = 0; i < posts.length; i++) {
            //            if (i % 5 === 0) {
            //        		intervalTags.add(i);
            //            }
            //        }

            document.addEventListener(
                    "DOMContentLoaded", function ( event ) {
                        console.log(
                                "DOM fully loaded and parsed"
                        );


                        $.getJSON(
//								// todo: inspect whether the string at data[ 'posts' ][ 0 ][ 'content' ][ '1' ] is empty, and if not, insert the link to "continue reading" automatically
                                fp, function ( data ) {
                                    var
                                            tail;



                                    $( "#dynode0" ).click(

                                            function () {
												tail = data[ 'posts' ][ 0 ][ 'content' ][ 1 ];
                                                var
                                                        someText =
                                                                generateTemplateString( 'content-tail', [ 0, tail ] );
                                                var newDiv       = $
                                                ( "<div>" ).
                                                           append( someText ).click( function () {
                                                                                         alert( "click!" );
                                                                                     }
                                                );
                                                $(
                                                        this
                                                ).append( newDiv );
                                            }
                                    );

									$( "#dynode2" ).click(

											function () {
												tail = data[ 'posts' ][ 2 ][ 'content' ][ 1 ];
												var
														someText =
																generateTemplateString( 'content-tail', [ 2, tail ] );
												var newDiv       = $
												( "<div>" ).
														   append( someText ).click( function () {
																						 alert( "click!" );
																					 }
												);
												$(
														this
												).append( newDiv );
											}
									);

									$( "#dynode4" ).click(
											function () {
												tail = data[ 'posts' ][ 4 ][ 'content' ][ 1 ];
												var
														someText =
																generateTemplateString( 'content-tail', [ 4, tail ] );
												var newDiv       = $
												( "<div>" ).
														   append( someText ).click( function () {
																						 alert( "click!" );
																					 }
												);
												$(
														this
												).append( newDiv );
											}
									);


									setTimeout(function() {
										move();
									}, 2000);
									}

                        );


                    }
            );



        </script>


        <div class= "modern-browser" >
                 < div; class= "modern-container center dark" >
                     < img; src="/images/kevin-zeidler-logo-clear.png"; alt= "logo" >
                                                                   < h1 > Welcome.; I'm Kevin.; It's my; site alright.< / h1 >
                            < span; class= "separator" > < / span >
                          < p > Unfortunately, I'm unable to support the web browser you're using. Why don't you have yourself an upgrade and come back?<br></p>
                                         < a;; href="http://www.google.com/chrome/"; target="_blank"; class= "button" > download;chrome < / a >
                                                                                                   </div >
                                                                                                   <!-- END IE 8 PAGE -->

	<!-- Javascript -->
    <script src="js/retina.js"; type="text/javascript"; charset= "utf-8" ></script>
	<script src="js/navigation.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/plugins.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/main.js" type="text/javascript" charset="utf-8"></script>



	<script src="js/styleswitch.js" type="text/javascript" charset="utf-8"></script>
</body>
</html>
}